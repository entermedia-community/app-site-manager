#set( $name = $context.getRequestParameter("name") )
#if ( !$name)
	#set ($name="")
#end
#set( $email = $context.getRequestParameter("organization_email") )
#if ( !$email)
	#set ($email="")
#end
<h1 class="text-center">[[Welcome]] $name [[to your]] MediaDB [[platform]]</h1>

#if( $usercatalog )

#set( $link =  "http://${usercatalog.clientsubdomain}.${hostingdomain}$usercatalog.rootpath" )
$usercatalog.name : <a href="$link">$link</a>


#else
<form action="./createsitefinish.html" method="post" id="createsiteform">
<div class="card card-login mx-auto mt-5">
  <div class="card-header">
  <strong>[[Fill in your Company information]]</strong>
  </div>
  <div class="card-body">
	<div class="row">
		<div class="col-sm-6">
			<div class="form-group">
				<label for="user">[[Company]]</label>
				<input class="form-control" id="organization" name="organization" type="text" placeholder="[[Your Company]] *" value="" required data-msg="Please enter your Company Name.">
				
			</div>
		</div>
				<div class="col-sm-6">
			<div class="form-group">
				<label for="user">[[Select your Business Local Time Zone]]</label>
				<select class="form-control" name="timezone" required data-msg="[[Please enter your Business Local Time Zone]].">
<option value="GMT-12:00">(GMT -12:00) Eniwetok, Kwajalein</option>
<option value="GMT-11:00">(GMT -11:00) Midway Island, Samoa</option>
<option value="GMT-10:00">(GMT -10:00) Hawaii</option>
<option value="GMT-09:50">(GMT -9:30) Taiohae</option>
<option value="GMT-09:00">(GMT -9:00) Alaska</option>
<option value="GMT-08:00">(GMT -8:00) Pacific Time (US &amp; Canada)</option>
<option value="GMT-07:00">(GMT -7:00) Mountain Time (US &amp; Canada)</option>
<option value="GMT-06:00">(GMT -6:00) Central Time (US &amp; Canada), Mexico City</option>
<option value="GMT-05:00"  selected="selected">(GMT -5:00) Eastern Time (US &amp; Canada), Bogota, Lima</option>
<option value="GMT-04:50">(GMT -4:30) Caracas</option>
<option value="GMT-04:00">(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz</option>
<option value="GMT-03:50">(GMT -3:30) Newfoundland</option>
<option value="GMT-03:00">(GMT -3:00) Brazil, Buenos Aires, Georgetown</option>
<option value="GMT-02:00">(GMT -2:00) Mid-Atlantic</option>
<option value="GMT-01:00">(GMT -1:00) Azores, Cape Verde Islands</option>
<option value="GMT+00:00">(GMT) Western Europe Time, London, Lisbon, Casablanca</option>
<option value="GMT+01:00">(GMT +1:00) Brussels, Copenhagen, Madrid, Paris</option>
<option value="GMT+02:00">(GMT +2:00) Kaliningrad, South Africa</option>
<option value="GMT+03:00">(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg</option>
<option value="GMT+03:50">(GMT +3:30) Tehran</option>
<option value="GMT+04:00">(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi</option>
<option value="GMT+04:50">(GMT +4:30) Kabul</option>
<option value="GMT+05:00">(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent</option>
<option value="GMT+05:50">(GMT +5:30) Bombay, Calcutta, Madras, New Delhi</option>
<option value="GMT+05:75">(GMT +5:45) Kathmandu, Pokhara</option>
<option value="GMT+06:00">(GMT +6:00) Almaty, Dhaka, Colombo</option>
<option value="GMT+06:50">(GMT +6:30) Yangon, Mandalay</option>
<option value="GMT+07:00">(GMT +7:00) Bangkok, Hanoi, Jakarta</option>
<option value="GMT+08:00">(GMT +8:00) Beijing, Perth, Singapore, Hong Kong</option>
<option value="GMT+08:75">(GMT +8:45) Eucla</option>
<option value="GMT+09:00">(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk</option>
<option value="GMT+09:50">(GMT +9:30) Adelaide, Darwin</option>
<option value="GMT+10:00">(GMT +10:00) Eastern Australia, Guam, Vladivostok</option>
<option value="GMT+10:50">(GMT +10:30) Lord Howe Island</option>
<option value="GMT+11:00">(GMT +11:00) Magadan, Solomon Islands, New Caledonia</option>
<option value="GMT+11:50">(GMT +11:30) Norfolk Island</option>
<option value="GMT+12:00">(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka</option>
<option value="GMT+12:75">(GMT +12:45) Chatham Islands</option>
<option value="GMT+13:00">(GMT +13:00) Apia, Nukualofa</option>
<option value="GMT+14:00">(GMT +14:00) Line Islands, Tokelau</option>

				</select>
			</div>
		</div>
		
	</div>
	
	
	<div class="row">
 		<div class="col-sm-6">
			<div class="form-group">
				<label for="user">[[Email]]</label>
				<input class="form-control" id="email" name="email" type="email" placeholder="[[Company Email]] *" value="$!user.email" required email data-msg="Please enter your Company Email.">
				
			</div>
		</div>
	</div>
	</div>
   
  </div>


<div class="card card-login mx-auto mt-5">
  <div class="card-header">
  <strong>[[Customize your EnterMediaDB Instance]]</strong>
  </div>
  <div class="card-body">
	<div class="row">
		<div class="col-sm-6">
			<div class="form-group">
				<label for="user">[[Name]]</label>
				<input class="form-control" id="name" name="name" type="text" placeholder="$!user.name" value="$name" required data-msg="[[Please enter your name]].">
				
			</div>
		</div>
				<div class="col-sm-6">
			<div class="form-group">
				<label for="user">[[Industry]]</label>
				
				<select class="form-control" name="organization_type" required data-msg="[[Please enter your Organization Industria Type]].">
				<option value="accounting">[[Accounting]] </option>
				<option value="educational">[[Educational]] </option>
				<option value="entretainment">[[Entertainment]]</option> 
				<option value="food">[[Food]]</option> 
				<option value="healthcare">[[Heath Care]]</option>
				<option value="manufacturing">[[Manufacturing]]</option>
				<option value="marketingsales">[[Marketing & Sales]]</option>
				<option value="realestate">[[Real Estate]]</option>
				<option value="telecomunications">[[Telecommunications]]</option>
				<option value="transport">[[Transport]]</option>
				<option value="technology">[[Technology]]</option>
				<option value="other">[[Other]]</option>
				</select>
				
			</div>
		</div>

 	</div>
	
  
	<div class="row">
		<div class="col-sm-6">
			<div class="form-group">
				<label for="user">Prefered Instance URL</label>
				<input class="form-control" id="organization_url" name="organization_url" type="text" placeholder="URL*" value=""  required>
				
			</div>

		</div>
				<div class="col-sm-6">
			<div class="form-group">
				<label for="user">[[Select a Region to deploy your trial instance]]</label>
				<select class="form-control" name="region" required data-msg="[[Please select a region]].">
				<option value="eu-west">[[Europe - West]]</option>
				<option value="us-east" selected="selected">[[USA - East]]</option>
				<option value="us-west">[[USA - West]]</option>
				</select>
			</div>
		</div>
	</div>
	
<!-- 	<div class="row">
		<div class="col-sm-6" style="padding-bottom:15px;">
		<div class="g-recaptcha" data-sitekey="6Ld1-FAUAAAAAEfqW8acK94Fw3P2N3MGmc1zfRWs"></div>	
		<input type="hidden" class="hiddenRecaptcha" name="hiddenRecaptcha" id="hiddenRecaptcha" required>
		</div>
				<div class="col-sm-6">
		</div>

	</div>
 -->	
	
		<div class="row">
			<div class="col-sm-6">
				<input type="submit" value="DEPLOY YOUR INSTANCE" class="btn btn-secondary">
			</div>
		</div>
		<div class="col-sm-6">
			
		</div>
	</div>
   
  </div>
</div>
</form>

<script>

var rf = function()
{
	niceURI = $("#organization").val().toLowerCase().replace(/[^a-zA-Z0-9-_]/g, '');
	$("#organization_url").val(niceURI.substring(0, 24));
	
	/*$.ajax({
        url: "verifyurl.html",
        data: {
            'organization_url' : $('#organization_url').val()
        },
        success: function(data) {
            if (data=='exists') {
				
			}
        },
        error: function(data){
            //error
        }
    });*/
}

jQuery(document).ready(function() 
{ 
	$("#organization").on("keyup",function()
	{
		rf();
	});
	$("#clientsubdomain").on("keyup",function()
	{
		//rf();
	});

	
	$("#createsiteform").validate({
		ignore: ".ignore",
	  rules: {
		organization_url: {
		  required: true,
		  maxlength: 25,
		  remote: "verifyurl.html"
		},
		hiddenRecaptcha: {
			 required: function() {
				 if(grecaptcha.getResponse() == '') {
					 return true;
				 } else {
					 return false;
				 }
			 }
		}
	  },
	  messages: {
		organization_url: {
		  remote: "That URL is already taken, please try a different URL."
		}
	  },
	  submitHandler: function(form){
        $('form input[type=submit]').attr('disabled', 'disabled');
        form.submit();
		}
	});

	$("#senddata").on("click", function() 
	{
	 	$(this).toggleClass('active');
	 	var postData = $(this).serializeArray();
	    var formURL = $(this).attr("action");
	    jQuery.ajax(
	    {
	        url : formURL,
	        type: "POST",
	        data : postData,
	        success:function(data, textStatus, jqXHR) 
	        {
	           //data: return data from server
	           console.log( jqXHR );
	           console.log( data );
	        },
	        error: function(jqXHR, textStatus, errorThrown) 
	        {
	            //if fails      
	        }
    	});
	 });

});
</script>

#end

 
